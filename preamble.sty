\usepackage{natbib}
\usepackage{a4wide}
\usepackage[english]{babel}

\usepackage{graphicx}
\usepackage{mathtools,amsthm,amssymb,amsmath}
\usepackage{changepage} % to change the width of the exercise environment
\usepackage{mathrsfs}
\usepackage{verbatim}
\usepackage{enumitem}
\usepackage{nicefrac}
\usepackage[colorlinks=true]{hyperref}

\numberwithin{equation}{section}

\DeclareMathOperator{\Exp}{Exp}

\usepackage{makeidx}
\makeindex

\usepackage[T1]{fontenc}
\usepackage{fouriernc}
\usepackage{manfnt} %for the dangerous bend
\usepackage{fontawesome} % for the linux hint symbol
\newcommand{\hintsymbol}{\marginpar{\center{\faLinux}}}
%\newcommand{\tbdsymbol}{\marginpar{\center{\dbend}}}
\newcommand{\tbdsymbol}{\dbend}
\newcommand{\recallsymbol}{\marginpar{\center{\bomb}}}

\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{arrows,automata,positioning,arrows.meta}
\usetikzlibrary{decorations.markings}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{groupplots}

% I don't know why, pythontext should appear somewhere above some
% other packages. I don't know which ones, but at this spot it works.
\usepackage{pythontex}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{} % clear all header fields
\fancyhead[LO, LE]{\rightmark}
\fancyfoot{} % clear all footer fields
\fancyfoot[C]{\thepage}
\setlength{\headheight}{14pt} 

\Newassociation{solution}{Solution}{ans}
\Newassociation{sol}{Solution}{ans}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
\renewcommand{\Solutionlabel}[1]{\textbf{s.#1.}}

\theoremstyle{definition} % font type for theorems and related environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}


\usepackage{xcolor}
\definecolor{light-gray}{gray}{0.9}
\usepackage{mdframed}

\newtheorem{mdexercise}{}[section]
\newenvironment{exercise}%
  {\begin{mdframed}[backgroundcolor=light-gray, hidealllines=true]\begin{mdexercise}}%
  {\end{mdexercise}\end{mdframed}}



% \newenvironment{myleftbar}{%
% \def\FrameCommand{\vrule width 2pt\hspace{0.6em}}%
% \MakeFramed{\advance\hsize-\width \FrameRestore}}%
% {\endMakeFramed}
% \usepackage{thmtools}

% \declaretheorem[numberwithin=section,name={},
% shaded={bgcolor=light-gray},
% %postheadhook=\leavevmode\myleftbar, %
% ]{exercise}

%\usepackage{etoolbox}% necessary for the command below
%\AtBeginEnvironment{exercise}{\begin{adjustwidth}{0em}{2em}}
%\AfterBeginEnvironment{exercise}{piet}
% %\AtEndEnvironment{exercise}{\hspace{\stretch1}\ensuremath\qedsymbol\end{adjustwidth}}
%\AtBeginEnvironment{exercise}{\leavevmode\myleftbar}
%\AtEndEnvironment{exercise}{\end{myleftbar}}
%\AtBeginEnvironment{exercise}{\pagecolor{light-gray}}
%\AtEndEnvironment{exercise}{}}
%\BeforeBeginEnvironment{exercise}{\myleftbar}
%\BeforeBeginEnvironment{exercise}{jaap}
%\AfterEndEnvironment{exercise}{\endmyleftbar}



\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}} % One single link

\newcommand{\tbd}{\tbdsymbol}
\newcommand{\TBD}{\tbdsymbol}

\newcommand{\B}{\mathbb{B}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Nn}{\mathbb{N}_{0}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}

\newcommand{\abs}[1]{\left\vert#1\right\vert}
\newcommand{\given}{\,\middle|\,}
%\renewcommand{\P}[1]{\,\mathsf{P}\left\{#1\right\}}
\newcommand{\V}[1]{\,\mathsf{V}\left[#1\right]}
%\newcommand{\E}[1]{\,\mathbb{E}\left\{#1\right\}}
\newcommand{\E}[1]{\,\mathsf{E}\left[#1\right]}
\renewcommand{\d}[1]{\,\text{d}#1}
\newcommand{\1}[1]{\,\mathbb{1}{[#1]}} % indicator
\renewcommand{\TH}{\mathrm{TH}} % indicator

%\newcommand{\recall}[1]{\emph{#1}}%\recallsymbol}
\newcommand{\recall}[1]{\emph{#1}\index{#1}}
\newcommand{\nvf}[1]{\tbdsymbol}

\makeatletter
\def\integral#1#2{\def\temp@expr{#1\,\mathrm d#2}\int\integral@}
\def\integral@{%
    \@ifnextchar{_}{\integral@sub}{%
    \@ifnextchar{^}{\integral@sup}{\temp@expr}}%
}%
\def\integral@sub#1#2{_{#2}\integral@}
\def\integral@sup#1#2{^{#2}\integral@}
\makeatother
% example on how to use the above definitions.
% \[
%     \integral{x^2}{x} \qquad
%     \integral{x^2}{x}_a \qquad
%     \integral{x^2}{x}^b \qquad
%     \integral{x^2}{x}_a^b \qquad
%     \integral{x^2}{x}^b_a \quad
%     \E{\int_0^\infty x^2 dx \given A}^b_a \quad
% \]

\makeatletter
\def\P#1{\def\temp@expr{\left(#1\right)}{\mathsf{P}}\prob@}
\def\prob@{%
    \@ifnextchar{_}{\prob@sub}{%
    \@ifnextchar{^}{\prob@sup}{\temp@expr}}%
}%
\def\prob@sub#1#2{_{#2}\prob@}
\def\prob@sup#1#2{^{#2}\prob@}
\makeatother

\setcounter{tocdepth}{1}

\allowdisplaybreaks

\graphicspath{{figures/}}
